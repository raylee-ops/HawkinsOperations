# Pinning Policy

## Purpose
All GitHub Actions in this repository are pinned by full commit SHA. This reduces supply-chain risk and keeps CI behavior deterministic.

## Pinned actions in use
- `actions/checkout@34e114876b0b11c390a56381ad16ebd13914f8d5`
- `actions/upload-artifact@ea165f8d65b6e75b540449e92b4886f43607fa02`
- `github/codeql-action@b5ebac6f4c00c8ccddb7cdcd45fdb248329f808a`
- `ossf/scorecard-action@62b2cac7ed8198b15735ed49ab1e5cf35480ba46`

## Rotation procedure
1. Resolve latest tag refs:
```powershell
gh api repos/actions/checkout/git/ref/tags/v4
gh api repos/actions/upload-artifact/git/ref/tags/v4
gh api repos/github/codeql-action/git/ref/tags/v3
gh api repos/ossf/scorecard-action/git/ref/tags/v2.4.0
```
2. If the tag object type is `tag` (annotated), resolve to commit:
```powershell
gh api repos/ossf/scorecard-action/git/tags/<tag_sha>
```
Use `object.sha` as the pinned commit.
3. Update workflow `uses:` values in `.github/workflows/*.yml`.
4. Run local parity:
```powershell
.\scripts\ci.ps1 -InstallMissingTools
```
5. Open a PR and verify required checks are green before merge.

## Verification checklist
1. Confirm all workflow `uses:` entries are SHA-pinned:
```powershell
rg -n "uses:" .github/workflows
```
2. Confirm deterministic artifacts generated by local parity:
- `OUTPUTS/scan_summary.md`
- `OUTPUTS/trivy.txt`
- `OUTPUTS/gitleaks.json`
- `OUTPUTS/pester.xml`
- `OUTPUTS/screenshots_checklist.md`
3. Capture recruiter proof screenshots from Actions + Code Scanning.
